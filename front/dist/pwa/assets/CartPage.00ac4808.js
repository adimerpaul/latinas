import{Q as k}from"./QImg.86f2a9c1.js";import{_,B as y,u as C,r as B,E as l,F as g,G as s,I as c,H as o,V as h,U as Q,S as $,w as b,T as q,L as u,P as p,R as w}from"./index.cc4f0594.js";import{Q as I,a as m,b as L}from"./QItemLabel.af216219.js";import{Q as x}from"./QList.b21c685a.js";import{Q as F}from"./QPage.461648c0.js";import{url as P}from"./axios.14583f39.js";import{u as v}from"./use-quasar.50738c86.js";const A=y({name:"BookPage",setup(){const e=C(),r=v();return{url:P,book:B({}),deletePedido(t){r.dialog({title:"Eliminar del carrito",message:"\xBFDesea eliminar este pedido?",cancel:!0,persistent:!0}).onOk(()=>{this.$store.pedidos.splice(t,1)})},compraWhatsapp(){console.log(e.pedidos);const t="%0A";let i=`Hola, quiero comprar los siguientes libros: ${t}`,d=0;e.pedidos.forEach(n=>{const a=parseInt(n.price)*parseInt(n.quantity);i+=`*${n.quantity} ${n.name}* ${a}Bs,${t} `,d+=a}),i+=`por un total de ${d} Bs`,window.open(`https://api.whatsapp.com/send?phone=59169603027&text=${i}`,"_blank")},capitalizeFirstLetter(t){return t=t.toLowerCase(),t.charAt(0).toUpperCase()+t.slice(1)},addToCart(t){r.dialog({title:"Agregar al carrito",message:"\xBFCuantos desea agregar?",prompt:{model:1,type:"number"},cancel:!0,persistent:!0}).onOk(i=>{r.notify({message:"Agregado al carrito "+i+" "+t.name,color:"green-4",textColor:"white",icon:"shopping_cart",position:"top",timeout:1e3,actions:[{icon:"close",color:"white",round:!0,handler:()=>{}}]}),this.$store.pedidos.push({...t,quantity:i})})}}},mounted(){},computed:{total(){let e=0;return this.$store.pedidos.forEach(r=>{e+=parseInt(r.price)*parseInt(r.quantity)}),e}}}),E={key:0,class:"text-h2 text-center text-grey-8"};function S(e,r,t,i,d,n){return l(),g(F,{class:"q-pa-xs"},{default:s(()=>[e.$store.pedidos.length===0?(l(),c("div",E,"No hay pedidos")):(l(),c(h,{key:1},[o(x,null,{default:s(()=>[(l(!0),c(h,null,Q(e.$store.pedidos,(a,f)=>b((l(),g(I,{clickable:"",key:f},{default:s(()=>[o(m,{avatar:""},{default:s(()=>[o(q,{rounded:""},{default:s(()=>[o(k,{src:e.$url+"uploads/"+a.image,ratio:1},null,8,["src"])]),_:2},1024)]),_:2},1024),o(m,{class:"text-subtitle1"},{default:s(()=>[u(p(a.quantity)+" "+p(e.capitalizeFirstLetter(a.name))+" ",1),o(L,{caption:""},{default:s(()=>[u(p(a.price)+" Bs",1)]),_:2},1024)]),_:2},1024),o(m,{side:"",top:""},{default:s(()=>[u(p(a.price*a.quantity)+" Bs ",1),o($,{flat:"",dense:"",round:"",icon:"delete",color:"red",onClick:T=>e.deletePedido(f)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)),[[w]])),128))]),_:1}),o($,{class:"q-mt-md full-width text-bold",color:"green",label:`Comprar ${e.total} Bs`,rounded:"","no-caps":"",icon:"shopping_cart",onClick:e.compraWhatsapp},null,8,["label","onClick"])],64))]),_:1})}var U=_(A,[["render",S]]);export{U as default};
