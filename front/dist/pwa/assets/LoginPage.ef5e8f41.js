import{Q as B}from"./QImg.7c586663.js";import{c as F,r as x,ad as E,ae as $,af as k,x as A,h as R,U as j,n as L,a$ as U,s as V,t as z,X as D,b0 as N,ah as O,ai as K,u as M,aj as T,al as W,am as X,an as m,ar as s,ao as r,ax as G,b1 as H,b2 as I,Q as g,aw as J,aW as Y}from"./index.19d89bdc.js";import{Q as Z}from"./QPage.5bc2f8ee.js";import{api as ee}from"./axios.3c97fd86.js";var te=F({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(t,{slots:l,emit:f}){const p=L(),d=x(null);let n=0;const a=[];function y(e){const c=typeof e=="boolean"?e:t.noErrorFocus!==!0,b=++n,S=(o,i)=>{f("validation"+(o===!0?"Success":"Error"),i)},Q=o=>{const i=o.validate();return typeof i.then=="function"?i.then(u=>({valid:u,comp:o}),u=>({valid:!1,comp:o,err:u})):Promise.resolve({valid:i,comp:o})};return(t.greedy===!0?Promise.all(a.map(Q)).then(o=>o.filter(i=>i.valid!==!0)):a.reduce((o,i)=>o.then(()=>Q(i).then(u=>{if(u.valid===!1)return Promise.reject(u)})),Promise.resolve()).catch(o=>[o])).then(o=>{if(o===void 0||o.length===0)return b===n&&S(!0),!0;if(b===n){const{comp:i,err:u}=o[0];if(u!==void 0&&console.error(u),S(!1,i),c===!0){const q=o.find(({comp:C})=>typeof C.focus=="function"&&U(C.$)===!1);q!==void 0&&q.comp.focus()}}return!1})}function _(){n++,a.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function h(e){e!==void 0&&V(e);const c=n+1;y().then(b=>{c===n&&b===!0&&(t.onSubmit!==void 0?f("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function w(e){e!==void 0&&V(e),f("reset"),z(()=>{_(),t.autofocus===!0&&t.noResetFocus!==!0&&v()})}function v(){D(()=>{if(d.value===null)return;const e=d.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||d.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||d.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(d.value.querySelectorAll("[tabindex]"),c=>c.tabIndex>-1);e!=null&&e.focus({preventScroll:!0})})}E(N,{bindComponent(e){a.push(e)},unbindComponent(e){const c=a.indexOf(e);c>-1&&a.splice(c,1)}});let P=!1;return $(()=>{P=!0}),k(()=>{P===!0&&t.autofocus===!0&&v()}),A(()=>{t.autofocus===!0&&v()}),Object.assign(p.proxy,{validate:y,resetValidation:_,submit:h,reset:w,focus:v,getValidationComponents:()=>a}),()=>R("form",{class:"q-form",ref:d,onSubmit:h,onReset:w},j(l.default))}});const oe=K({name:"LoginPage",setup(){const t=M(),l=T(),f=x("admin@test.com"),p=x("123456"),d=()=>{ee.post("users/login",{email:f.value,password:p.value}).then(n=>{console.log(n.data),localStorage.setItem("tokenLatinas",n.data.jwt),t.user=n.data.user,l.push("/admin")})};return{email:f,password:p,visiblePassword:x(!1),login:d}}}),ae={class:"row"},se=s("div",{class:"col-12 col-md-4"},null,-1),ne={class:"col-12 col-md-4"},ie={class:"text-center q-pt-md"},re=s("div",null,[s("div",{class:"text-subtitle1 text-bold text-center text-grey-9"},"Bienvenido"),s("div",{class:"text-subtitle2 text-center text-grey-7"},"Inicia sesi\xF3n para continuar")],-1),le={class:"row"},de={class:"col-12"},ue={class:"col-12 q-px-md q-py-xs"},ce={class:"col-12 q-px-md q-py-xs"},fe={class:"col-12 q-pa-md flex flex-center"};function me(t,l,f,p,d,n){return W(),X(Z,{padding:""},{default:m(()=>[s("div",ae,[se,s("div",ne,[r(Y,{class:"max-w-sm mx-auto bg-grey-3"},{default:m(()=>[r(te,{onSubmit:t.login},{default:m(()=>[s("div",ie,[r(G,{size:"100px",class:"q-mb-md",rounded:""},{default:m(()=>[r(B,{src:"/logo.png"})]),_:1})]),re,s("div",le,[s("div",de,[r(H)]),s("div",ue,[r(I,{modelValue:t.email,"onUpdate:modelValue":l[0]||(l[0]=a=>t.email=a),label:"Email",filled:""},{prepend:m(()=>[r(g,{name:"o_email"})]),_:1},8,["modelValue"])]),s("div",ce,[r(I,{modelValue:t.password,"onUpdate:modelValue":l[2]||(l[2]=a=>t.password=a),label:"Password",filled:"",type:t.visiblePassword?"text":"password"},{prepend:m(()=>[r(g,{name:"o_lock"})]),append:m(()=>[r(g,{name:t.visiblePassword?"o_visibility":"o_visibility_off",onClick:l[1]||(l[1]=a=>t.visiblePassword=!t.visiblePassword)},null,8,["name"])]),_:1},8,["modelValue","type"])])]),s("div",fe,[r(J,{label:"Ingresar",type:"submit",size:"15px",class:"text-bold",color:"primary",rounded:"","no-caps":"",style:{width:"250px"}})])]),_:1},8,["onSubmit"])]),_:1})])])]),_:1})}var ye=O(oe,[["render",me]]);export{ye as default};
